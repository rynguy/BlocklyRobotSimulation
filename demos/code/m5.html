<!DOCTYPE html>
<html id="tits">
<head>
<!-- Make a box -->
  <meta charset="utf-8">
  <meta name="google" value="notranslate">
  <title>Blockly Demo:</title>
  <link rel="stylesheet" href="style.css">
  <script src="../../blockly_compressed.js"></script>
  <script src="../../blocks_compressed.js"></script>
  <script src="../../ch_compressed.js"></script>
  <script src="../../cpp_compressed.js"></script>
  <script src="../../core/workspace.js"></script>
  <script src="../../generators/ch/linkbot.js"></script>
  <script src="../../generators/cpp/linkbot.js"></script>
  <script src="codeorig.js"></script>
  <script src="./jquery/dist/jquery.min.js"></script>
  <!-- Latest compiled and minified CSS -->

  <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">

  <!-- Optional theme -->
  <link rel="stylesheet" href="./bootstrap/css/bootstrap-theme.min.css">
  
  <link rel="stylesheet" type="text/css" href="accordion.css"/>

  <!-- Latest compiled and minified JavaScript -->
  <script src="./bootstrap/js/bootstrap.min.js"></script>

  <style>
  #horizTranslate {
  }

  .navbar .nav,
  .navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
  }

  .navbar-inner {
    text-align:center;
  }

  #numNav{
    
  }

  #home {
    width: 100px;
    height: 100px;
    background: url(./img/linkbot_spritesheet.png) 0 0;
    border: none;
}


</style>

<script>
  var robotX = 0;
  var robotY = 0;
  var displayAngle = 0;
  
  function getCoordinates()
  {
    var coordinates = "(" + robotX + "," +  robotY + ")";
    return coordinates;
  }


  function getAngle()
  {
    var disp= displayAngle + "Â°";
    return disp;
  }


</script>

 
</head>


<nav class="navbar" style="background-color:#C99700; color:#113661; z-index:0;">
<span style="margin-bottom:1px; padding:7px; background-color:#FFF; position:absolute; z-index:0;">
  <a href= "http://c-stem.ucdavis.edu/"><img src="./img/cstemlogo.png"></a></span>
 <div data-toggle="popover" data-trigger="focus"  data-content="Pull a block from here into the workspace to complete the task!" align="center" style="background-color:#C99700; color:#113661;" class="container-fluid">
   <div align="center" style=" padding-left: 440px; width:75%; background-color:#C99700; color:#113661;" class="navbar-header">
       <span style="margin-left:0;" class="glyphicon glyphicon-bed" aria-hidden="true"></span>  
<nav style="text-align:center; font-size:25px; font-family:Arial Black, Gadget, sans-serif; position:relative; z-index:1;" id="numNav">Coding With Linkbot and Mindstorms
<div align="center" class="accordion horizontal">
    <ul>
        <li>
            <input type="radio" id="vert-1" name="vert-accordion" />
            <label for="vert-1">Tutorial</label>
            <div class="content">
                <h3>
                <a href="./v1.html">1</a>
                <a href="./v2.html">2</a>
                <a href="./v3.html">3</a>
                <a href="./v4.html">4</a>
                <a href="./v5.html">5</a>
                </h3>
            </div>
        </li>
        <li>
            <input type="radio" id="vert-2" name="vert-accordion" />
            <label for="vert-2">Coding Lessons</label>
            <div class="content">
                <h3>
                <a href="./index.html">1</a>
                <a href="./c2.html">2</a>
                <a href="./c3.html">3</a>
                <a href="./c4.html">4</a>
                <a href="./c5.html">5</a>
                <a href="./c6.html">6</a>
                <a href="./c7.html">7</a>
                <a href="./c8.html">8</a>
                <a href="./c9.html">9</a>
                <a href="./c10.html">10</a>
                </h3>
            </div>
        </li>
        <li>
            <input type="radio" id="vert-3" checked="checked" name="vert-accordion" />
            <label for="vert-3">Math Lessons</label>
            <div class="content">
                <h3>
                <a href="./m1.html">1</a>
                <a href="./m2.html">2</a>
                <a href="./m3.html">3</a>
                <a href="./m4.html">4</a>
                <a style="color:#113661" href="./m5.html">5</a>
                <a href="./m6.html">6</a>
                <a href="./m7.html">7</a>
                <a href="./m8.html">8</a>
                <a href="./m9.html">9</a>
                <a href="./m10.html">10</a>
                </h3>
            </div>
        </li>
        <li>
            <input type="radio" id="vert-4" name="vert-accordion" />
            <label for="vert-4">Playground</label>
            <div class="content">
                <h3><a href="./Playground.html">Playground</a></h3>
            </div>
        </li>
    </ul>
</div>
</nav>

    </div>
  </div>
</nav>
<body style="width:100%; overflow-y:scroll;">
    <div  >

  <div style="position:relative; z-index:1;" class="row">

    <div style="padding-left:30px; margin-left:10px; width:580px" class="col-md-4">
    <div style="position:absolute; z-index:2; " class='box'><img id = "home" src="./img/largeTransparent.gif" style = "width: 200px; height: 200px; margin-top: 255px; margin-left: 80px;"></div> 
    <div style="position:absolute; z-index:0; margin-top: -2px; margin-left:157px; font-weight:900; font-size:18px; color: black;">
      <b id = "plus-y2">24</b>
    </div> 
    <div style="position:absolute; z-index:0; margin-top: 178px; margin-left:157px; font-weight:900; font-size:18px; color: black;">
      <b id = "plus-y">12</b>
    </div> 
    <div style="position:absolute; z-index:0; margin-top: 519px; margin-left:151px; font-weight:900; font-size:18px; color: black;">
      <b id= "minus-y">-12</b>
    </div> 
    <div style="position:absolute; z-index:0; margin-top: 358px; margin-left:2px; font-weight:900; font-size:18px;color: black;">
      <b id= "minus-x" >-12</b>
    </div> 
    <div style="position:absolute; z-index:0; margin-top: 358px; margin-left:335px; font-weight:900; font-size:18px; color: black;">
      <b id= "plus-x" >12</b>
      
    </div>
    <div style="position:absolute; z-index:0; margin-top: 358px; margin-left:515px; font-weight:900; font-size:18px; color: black;">
      <b id= "plus-x2" >24</b>
    </div>
    <div style="position:absolute; z-index:0; margin-top: 358px; margin-left:165px; font-weight:900; font-size:18px; color: black;">
      <b id= "origin" >0</b>
    </div>
      <div id= "grid" style="position:relative; z-index:-1; width:542px; height:542px; float:left; background-color:#4F6F3A">
       <svg id="mysvg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
         <defs>
           <pattern id="smallGrid" width="15" height="15" patternUnits="userSpaceOnUse">
             <path id="smallGrid2" d="M 15 0 L 0 0 0 15" fill="none" stroke="white" stroke-width="1"/>
           </pattern>
           <pattern id="grid" width="180" height="180" patternUnits="userSpaceOnUse">
             <rect  width="180" height="180" fill="url(#smallGrid)"/>
             <path  d="M 180 0 L 0 0 0 180" fill="none" stroke="#FF0000" stroke-width="4"/>
           </pattern>
         </defs>

         <rect width="100%" height="100%" fill="url(#grid)" />
       </svg>
       </div>

       <div>
      <button id="startover" style="margin-bottom:5px; margin-top:5px; width:100px; height:42px; background-color:#C99700; color:white; border:none;" class='start_Over' value='play'><span style="height:21px">Start Over</span>
              </button>
              <button id="runButton" style="margin-bottom:5px; width:100px; height:42px; background-color:#C99700; color:white; border:none;" class='toggleButton' value='play'>Run
              </button>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <input type="radio" name="units" id="US Customary" value="US Customary" onclick="toolbox()" checked>US Customary
              <input type="radio" name="units" id="Metric" value="Metric" onclick="toolbox()" >Metric
              </div>
              <div id="R1" >
                <b>Choose Robot 1</b>&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="radio" name="robot1" id="L1" onclick="toolbox(); loadImg(document.getElementById('1stLinkbot'))" checked>
                <img id= "1stLinkbot" width= "32" height= "32" src="./img/linkbot_alone.png">
                <input type="radio" name="robot1" id="M1" onclick="toolbox(); loadImg(document.getElementById('1stMindstorm'))">
                <img id= "1stMindstorm" width="32" height= "32" src="./img/minds_alone.png">
                &nbsp;&nbsp;&nbsp;&nbsp;
                <b>Coordinates</b>
                <span id = "coordinates">
                  <script>document.write(getCoordinates())</script>
                </span>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <b>Current Angle: </b>
                <span id = "displayAngle">
                  <script>document.write(getAngle())</script>
                </span>
              </div>
             
              
              <p>
              <h3 style="PADDING-RIGHT: 4%; margin-top:-20px; display:inline;">
        <strong style="font-size:18px; font-family:tahoma;">
        Can you move me to (5,0). Then move me left twice that distance.
        </strong>
        <br> <br>
        <button type="button" class="btn btn-primary" onclick="solution();">Possible Solution</button>
        <div id="solution" style="display: none; font-size:18px; font-family:tahoma;">
        <span class="com">#include</span><span class="pln"> </span><span class="str">&lt;linkbot.h&gt;</span>
        <br>
        <span class="typ">CLinkbotI</span><span class="pln"> robot</span><span class="pun">;</span>
        <br><br>
        <span class="pln">robot</span><span class="pun">.</span><span class="pln">driveDistance</span><span class="pun">(</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.75</span><span class="pun">);</span>
        <br>
        <span class="pln">robot</span><span class="pun">.</span><span class="pln">turnLeft</span><span class="pun">(</span><span class="lit">90</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.75</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3.69</span><span class="pun">);</span>
        <br>
        <span class="pln">robot</span><span class="pun">.</span><span class="pln">driveDistance</span><span class="pun">(</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.75</span><span class="pun">);</span>
        </h3>
      </p>
      

    </div>

    <div id = "workspace" style= " z-index: -1; position:absolute; width:100%; padding-left:610px; padding-right:40px;"class="col-md-6">
    <table width="100%" height="100%">
    
    <tr> 
      <td colspan=2>
        <table width="100%">
          <tr style="background-color:#335379; color:#FFF;" id="tabRow" height="1em">
            <td style="background-color:#335379; color:#FFF;" id="tab_blocks" class="tabon">Blocks</td>
            <td style="background-color:#FFF; color:#FFF;" class="tabmin">&nbsp;</td>
            <td style="background-color:#335379; color:#FFF;" id="tab_ch" class="taboff">Ch</td>
            <td style="background-color:#FFF; color:#FFF;" class="tabmin">&nbsp;</td>
            <td style="background-color:#335379; color:#FFF;" id="tab_cpp" class="taboff">C++</td>
            <td style="background-color:#335379;" class = "tabmax"></td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td height="100%" colspan=2 id="content_area">
      </td>
    </tr>
  </table>
  <div id="content_blocks" class="content" data-toggle="popover" data-trigger="focus"  data-content="Pull a block from here into the workspace to complete the task!"></div>
  <pre id="content_ch" class="content"></pre>
  <pre id="content_cpp" class="content"></pre>
  <textarea id="content_xml" class="content" wrap="off"></textarea>
      <div id="blocklyDiv" style="height: 600px; width: 100%;"></div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      
  </div>
  <category id="Linkbot 1 in" name="Robot">
    <block type="linkbot_drive_distance_in"></block>
    <block type="linkbot_turn_in"></block>
    <block type="linkbot_speed_in"></block>
  </category>
  <category id="Linkbot 1 cm" name="Robot">
    <block type="linkbot_drive_distance_cm"></block>
    <block type="linkbot_turn_cm"></block>
    <block type="linkbot_speed_cm"></block>
  </category>
  <category id="Mindstorms 1 in" name="Robot">
    <block type="mindstorms_drive_distance_in"></block>
    <block type="mindstorms_turn_in"></block>
    <block type="mindstorms_speed_in"></block>
  </category>
  <category id="Mindstorms 1 cm" name="Robot">
    <block type="mindstorms_drive_distance_cm"></block>
    <block type="mindstorms_turn_cm"></block>
    <block type="mindstorms_speed_cm"></block>
  </category>
  
  <xml id="toolbox" style="display: none">
      <category name="Logic">
        <block type="controls_if"></block>
        <block type="logic_compare"></block>
        <block type="logic_operation"></block>
        <block type="logic_negate"></block>
        <block type="logic_boolean"></block>
        <block type="logic_null"></block>
        <block type="logic_ternary"></block>
      </category>
      <category name="Loops">
        <block type="controls_repeat_ext">
          <value name="TIMES">
            <block type="math_number">
              <field name="NUM">10</field>
            </block>
          </value>
        </block>
        <block type="controls_whileUntil"></block>
        <block type="controls_for">
          <value name="FROM">
            <block type="math_number">
              <field name="NUM">1</field>
            </block>
          </value>
          <value name="TO">
            <block type="math_number">
              <field name="NUM">10</field>
            </block>
          </value>
          <value name="BY">
            <block type="math_number">
              <field name="NUM">1</field>
            </block>
          </value>
        </block>
        <block type="controls_flow_statements"></block>
      </category>
      <category name="Math">
        <block type="math_number"></block>
        <block type="math_arithmetic"></block>
        <block type="math_single"></block>
        <block type="math_trig"></block>
        <block type="math_constant"></block>
        <block type="math_number_property"></block>
        <block type="math_change">
          <value name="DELTA">
            <block type="math_number">
              <field name="NUM">1</field>
            </block>
          </value>
        </block>
        <block type="math_round"></block>
        <block type="math_on_list"></block>
        <block type="math_modulo"></block>
        <block type="math_constrain">
          <value name="LOW">
            <block type="math_number">
              <field name="NUM">1</field>
            </block>
          </value>
          <value name="HIGH">
            <block type="math_number">
              <field name="NUM">100</field>
            </block>
          </value>
        </block>
        <block type="math_random_int">
          <value name="FROM">
            <block type="math_number">
              <field name="NUM">1</field>
            </block>
          </value>
          <value name="TO">
            <block type="math_number">
              <field name="NUM">100</field>
            </block>
          </value>
        </block>
        <block type="math_random_float"></block>
      </category>
      <category id="vars" name="Variables" custom="VARIABLE"></category>
      <category name="Functions" custom="PROCEDURE"></category>
  </xml>

<div align="center" id="footer-info" style="background-color:#FFF; color:#000;">

        <!--footer container--><div class="row">

   
<div class="col-md-6">     




</div>

<div id="roboyes" style = "position: absolute; z-index: -1">

</div>

                   
      
      <div id="copyright" allign="center" style="position: absolute; font-size:13px; margin-top: 120px; width:100%">
      <div>
      <br>Copyright Â© 2015 UC Davis C-STEM Center | <a href="/contact-us/" style="color:#002666;">Contact Us</a> | <a href="http://ucdavis.edu/help/privacy-accessibility.html" style="color:#002666;">Privacy Policy</a>
        <br>
        <a href="http://www.facebook.com/UCDCSTEM" rel="nofollow" target="_blank"><img width="32" height="32" src="http://engineering.ucdavis.edu/wp-content/plugins/social-media-widget/images/default/32/facebook.png" alt="facebook" title="Follow Us on Facebook" style="opacity: 0.8; -moz-opacity: 0.8;" class="fade"></a>

<a href="http://www.twitter.com/cstematucd" rel="nofollow" target="_blank"><img width="32" height="32" src="http://engineering.ucdavis.edu/wp-content/plugins/social-media-widget/images/default/32/twitter.png" alt="twitter" title="Follow Us on Twitter" style="opacity: 0.8; -moz-opacity: 0.8;" class="fade"></a>

<a href="https://secure.flickr.com/photos/c-stem/sets/" rel="nofollow" target="_blank"><img width="32" height="32" src="http://engineering.ucdavis.edu/wp-content/plugins/social-media-widget/images/default/32/flickr.png" alt="flicker" title="Follow Us on Flickr" style="opacity: 0.8; -moz-opacity: 0.8;" class="fade"></a>

<a href="https://www.youtube.com/user/UCDavisIEL" rel="nofollow" target="_blank"><img width="32" height="32" src="http://engineering.ucdavis.edu/wp-content/plugins/social-media-widget/images/default/32/youtube.png" alt="youtube" title="Follow Us on YouTube" style="opacity: 0.8; -moz-opacity: 0.8;" class="fade"></a>
      </div>
    </div>

         
      </div>    
      </div><!--footer info end-->
  
  <script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/themes/CSTEM/js/superfish.js?ver=1.0"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/themes/CSTEM/js/jquery.custom.js?ver=1.0"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/themes/CSTEM/js/jquery.fitvids.js?ver=1.0"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/themes/CSTEM/js/jquery.flexslider.js?ver=2.1"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/themes/CSTEM/js/selectnav.js?ver=0.1"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/themes/CSTEM/js/responsive-scripts.js?ver=1.2.1"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/themes/CSTEM/js/cf7js.js?ver=1.2.1"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/plugins/bbpress/templates/default/js/editor.js?ver=2.5.3-5249"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.48.0-2013.12.28"></script>
<script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/c-stem.ucdavis.edu\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ..."};
/* ]]> */
</script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=3.7"></script>
<script type="text/javascript">
/* <![CDATA[ */
var thickboxL10n = {"next":"Next >","prev":"< Prev","image":"Image","of":"of","close":"Close","noiframes":"This feature requires inline frames. You have iframes disabled or your browser does not support them.","loadingAnimation":"http:\/\/c-stem.ucdavis.edu\/wp-includes\/js\/thickbox\/loadingAnimation.gif"};
/* ]]> */
</script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-includes/js/thickbox/thickbox.js?ver=3.1-20121105"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-includes/js/jquery/ui/core.min.js?ver=1.11.2"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-includes/js/jquery/ui/widget.min.js?ver=1.11.2"></script>
<script type="text/javascript" src="http://c-stem.ucdavis.edu/wp-includes/js/jquery/ui/tabs.min.js?ver=1.11.2"></script>
<script type="text/javascript">
/* <![CDATA[ */
jQuery(document).ready( function($) {
  $("ul.menu").not(":has(li)").closest('div').prev('h3.widget-title').hide();
});
/* ]]> */
</script>
<!-- Start Of Script Generated By cforms v14.6 [Oliver Seidel | www.deliciousdays.com] -->
<!-- End Of Script Generated By cforms -->




</div>
  <script>

 /* var w11 = window,
    d11 = document,
    e11 = d11.documentElement,
    g11 = d11.getElementsByTagName('body')[0],
    x11 = w11.innerWidth || e11.clientWidth || g11.clientWidth,
    y11 = w11.innerHeight|| e11.clientHeight|| g11.clientHeight;

    console.log("X NIACUH: " + x11);
    console.log("Y NIACUH: " + y11);*/




  var imgChk = "linkbot";
  



  function loadImg(x) {
    /*document.getElementById("home").style.height = 0;
    document.getElementById("home").style.width = 0;
    document.getElementById("home").src = "";*/
    $("#home").css({'width': 0});
    $("#home").css({'height': 0});
    $("#home").css({'background': 'none'});
    setTimeout(function(){
                  
                  if(x.id == "1stLinkbot") //linkbot
                  {
                    imgChk = "linkbot";
                    document.getElementById("home").style.height = "200px";
                    document.getElementById("home").style.width = "200px";
                    $("#home").css({'background': 'url(./img/linkbot_spritesheet.png) 0 0'});
                    $("#home").css({'margin-left': 80 + 'px'});
                    $("#home").css({'margin-top': 255 + 'px'});
                    document.getElementById("home").src = "./img/largeTransparent.gif";
                  }
                  else
                  { //mindstorms
                    imgChk = "mindstorms";
                    document.getElementById("home").style.height = "200px";
                    document.getElementById("home").style.width = "200px";
                    $("#home").css({'background': 'url(./img/mindstorms_spritesheet.png) 0 0'});
                    $("#home").css({'margin-left': 80 + 'px'});
                    $("#home").css({'margin-top': 255 + 'px'});
                    document.getElementById("home").src = "./img/largeTransparent.gif";
                  }
              }, 50);
    
  }


  // function toolbox() {
  //   document.getElementById('blocklyDiv').innerHTML = '';
  //   //change between customary and metric
  //   if(document.getElementById('US Customary').checked){
  //     Blockly.inject(document.getElementById('blocklyDiv'),
  //       {toolbox: document.getElementById('toolbox')});
  //     // edit the grid size
  //     elem = sv.getElementById("smallGrid");
  //     elem.setAttribute("width", "15");
  //     elem.setAttribute("height", "15");
  //     elem = sv.getElementById("smallGrid2");
  //     elem.setAttribute("d", "M 15 0 L 0 0 0 15");
  //     document.getElementById("plus-y").innerHTML= '12';
  //     document.getElementById("minus-y").innerHTML= '-12';
  //     document.getElementById("plus-x").innerHTML= '12';
  //     document.getElementById("minus-x").innerHTML= '-12';
  //     document.getElementById("origin").innerHTML= '0';
  //   }
  //   else{
  //     Blockly.inject(document.getElementById('blocklyDiv'),
  //       {toolbox: document.getElementById('toolbox')});
  //     elem = sv.getElementById("smallGrid");
  //     elem.setAttribute("width", "18");
  //     elem.setAttribute("height", "18");
  //     elem = sv.getElementById("smallGrid2");
  //     elem.setAttribute("d", "M 18 0 L 0 0 0 18");
  //     document.getElementById("plus-y").innerHTML= '10';
  //     document.getElementById("minus-y").innerHTML= '-10';
  //     document.getElementById("plus-x").innerHTML= '10';
  //     document.getElementById("minus-x").innerHTML= '-10';
  //     document.getElementById("origin").innerHTML= '0';
  //   }
  // }
  
  
  var lclone1in = document.getElementById('Linkbot 1 in').cloneNode(true);
  var mclone1in = document.getElementById('Mindstorms 1 in').cloneNode(true);
  var lclone1cm = document.getElementById('Linkbot 1 cm').cloneNode(true);
  var mclone1cm = document.getElementById('Mindstorms 1 cm').cloneNode(true);
  
  function toolbox() {
    document.getElementById('blocklyDiv').innerHTML = '';
    if(document.getElementById('toolbox').contains(lclone1in))
      document.getElementById('toolbox').removeChild(lclone1in);
    if(document.getElementById('toolbox').contains(mclone1in))
      document.getElementById('toolbox').removeChild(mclone1in);
    if(document.getElementById('toolbox').contains(lclone1cm))
      document.getElementById('toolbox').removeChild(lclone1cm);
    if(document.getElementById('toolbox').contains(mclone1cm))
      document.getElementById('toolbox').removeChild(mclone1cm);
    if(document.getElementById('US Customary').checked)
    {      
      if(document.getElementById('L1').checked)
      {
        document.getElementById('toolbox').insertBefore(lclone1in, document.getElementById('toolbox').childNodes[10]);
      }
      else if(document.getElementById('M1').checked)
      {
        document.getElementById('toolbox').insertBefore(mclone1in, document.getElementById('toolbox').childNodes[10]);
      }
    }
    else
    {
      if(document.getElementById('L1').checked)
      {
        document.getElementById('toolbox').insertBefore(lclone1cm, document.getElementById('toolbox').childNodes[10]);
      }
      else if(document.getElementById('M1').checked)
      {
        document.getElementById('toolbox').insertBefore(mclone1cm, document.getElementById('toolbox').childNodes[10]);
      }
    }
    Blockly.inject(document.getElementById('blocklyDiv'),
      {toolbox: document.getElementById('toolbox')});
    if(document.getElementById('US Customary').checked){
      // edit the grid size
      elem = sv.getElementById("smallGrid");
      elem.setAttribute("width", "15");
      elem.setAttribute("height", "15");
      elem = sv.getElementById("smallGrid2");
      elem.setAttribute("d", "M 15 0 L 0 0 0 15");
      document.getElementById("plus-y2").innerHTML= '24';
      document.getElementById("plus-y").innerHTML= '12';
      document.getElementById("minus-y").innerHTML= '-12';
      document.getElementById("plus-x").innerHTML= '12';
      document.getElementById("plus-x2").innerHTML= '24';
      document.getElementById("minus-x").innerHTML= '-12';
      document.getElementById("origin").innerHTML= '0';
    }
    else{
      elem = sv.getElementById("smallGrid");
      elem.setAttribute("width", "18");
      elem.setAttribute("height", "18");
      elem = sv.getElementById("smallGrid2");
      elem.setAttribute("d", "M 18 0 L 0 0 0 18");
      document.getElementById("plus-y").innerHTML= '10';
      document.getElementById("plus-y2").innerHTML= '20';
      document.getElementById("minus-y").innerHTML= '-10';
      document.getElementById("plus-x").innerHTML= '10';
      document.getElementById("plus-x2").innerHTML= '20';
      document.getElementById("minus-x").innerHTML= '-10';
      document.getElementById("origin").innerHTML= '0';
    }

  }
    
  function solution()
  {
    if(document.getElementById('solution').style.display == '')
      document.getElementById('solution').style.display = 'none';
    else
      document.getElementById('solution').style.display = '';
  }
  </script>





  <script type="text/javascript">
  var round = Math.round;
  var speeed = 10;
      var boxOne = document.getElementsByClassName('box')[0],
    $boxTwo = $('.box:eq(1)');
    boxOne.classList.add('horizTranslate');
    boxOne.id = 'horizTranslate';
console.log(document.getElementsByClassName('toggleButton')[0].value )
document.getElementsByClassName('toggleButton')[0].onclick = function() {
  if( document.getElementsByClassName('toggleButton')[0].value === 'play') 
  {
    document.getElementsByClassName('toggleButton')[0].value = 'reset';
    document.getElementsByClassName('toggleButton')[0].innerHTML = 'Reset';

    var robotime = 0;
    var rootBlock = null;
    var driveBlock = null;
    var angleBlock = null;
    var x = 0;
    var y = 0;
    var a = 0;
    var b = 0;
    var angle = 0;
    var oldangle = 0;
    var newangle = 0;
    var direction = 0;
    var dis2 = 0;
    var dis = 0;
    var blockDirection;

    var blocks = Blockly.mainWorkspace.getTopBlocks(false);
    var childBlocks = null;
    rootBlock = blocks[0];
    
    //for (var i = 0, block; block = blocks[i]; i++) {
    if (rootBlock.type == 'linkbot_drive_distance_in' || rootBlock.type == 'linkbot_drive_distance_cm' || rootBlock.type == 'mindstorms_drive_distance_in' || rootBlock.type == 'mindstorms_drive_distance_cm') {

        driveBlock = rootBlock;
        if(document.getElementById('US Customary').checked) //inches
        {
          dis2 = (round(driveBlock.getFieldValue('distance'))*15);
          dis = (round(driveBlock.getFieldValue('distance'))*15);
          robotime = round(driveBlock.getFieldValue('distance')) / speeed;
          //dis 1 x y coords for robot 
          x = dis * Math.cos(angle);
          y = dis * Math.sin(angle);
          robotX += x/15;
          robotY += y/15;
        }
        else //metric
        {
          dis2 = (round(driveBlock.getFieldValue('distance'))*18);
          dis = (round(driveBlock.getFieldValue('distance'))*18);
          robotime = (round(driveBlock.getFieldValue('distance'))) / speeed;
          x = dis * Math.cos(angle);
          y = dis * Math.sin(angle);
          robotX += x/18;
          robotY += y/18;
        }
        

       
        //dis 2 x y  coords for line
        a = dis2 * Math.cos(angle)  + round(60)* Math.cos(angle);
        b = dis2 * Math.sin(angle)  + round(60)* Math.sin(angle);
      
        
        console.log('dis x' + x)
        drive(x,y,robotime);
        document.getElementById('coordinates').innerHTML = getCoordinates();
    }//if first is drive
    if (rootBlock.type == 'linkbot_turn_in' || rootBlock.type == 'linkbot_turn_cm' || rootBlock.type == 'mindstorms_turn_in' || rootBlock.type == 'mindstorms_turn_cm') {
      angleBlock = rootBlock;
      angle += (round(angleBlock.getFieldValue('turn direction'))*Math.PI/180);
      blockDirection = angleBlock.getFieldValue('direction');
      newangle = (round(angleBlock.getFieldValue('turn direction')));
      if(blockDirection == 'turnLeft')
      {
        displayAngle += newangle;
      }
      else if(blockDirection == 'turnRight')
      {
        displayAngle = 360 - newangle;
      }

      if(newangle >= 360)
        newangle -= 360;

          var leftMargin = 0;
          var topMargin = 0;
          var intervalTime = 500/(newangle/5);
          var numImages = Math.floor(newangle/5);
          console.log("NUMBER OF IMAGES" + numImages);
          console.log('NEWANGLE NEW ANGLE ' + newangle);
          setTimeout(function(){linkbotTurn(leftMargin, topMargin, newangle, numImages, intervalTime, blockDirection)}, intervalTime);
          document.getElementById('displayAngle').innerHTML = getAngle();

      //direction = 
    }//if first is turn

    if(rootBlock.type == 'linkbot_speed_in' || rootBlock.type == 'linkbot_speed_cm' || rootBlock.type == 'mindstorms_speed_in' || rootBlock.type == 'mindstorms_speed_cm')
    {
      speedBlock = rootBlock;
      speeed = speedBlock.getFieldValue('speed');
    }


    var i = 0;
    childBlocks = rootBlock.getChildren();
    console.log('child ' + childBlocks.length);
    console.log('#####################################');
    //document.getElementById('runButton').css({'background-color': '#fff'});
    document.getElementsByClassName('toggleButton')[0].style.background = 'gray';
    document.getElementsByClassName('toggleButton')[0].disabled = true;
    setTimeout(function(){
        document.getElementsByClassName('toggleButton')[0].disabled = false; document.getElementsByClassName('toggleButton')[0].style.background = '#C99700';
      }, childBlocks.length*1000);

    if(childBlocks.length > 0){
  
      
      setTimeout(function(){move(i, robotime,driveBlock,angleBlock,x,y,a,b,angle,dis, dis2, blocks, childBlocks, newangle)}, 1000);
      
    }//if only one block
    //dis is the input from the puzzle


    /*elem = sv.getElementById("tits");
    if(a<0) {
      if(b<0)
        elem.setAttribute("d", "M 63 63 L" + -a + -b);
      else
        elem.setAttribute("d", "M 63 63 L" + -a + b);
    }
    else {
      if(b<0)
        elem.setAttribute("d", "M 63 63 L" + a + -b);
      else
        elem.setAttribute("d", "M 63 63 L" + a + b);
    }*/

    
    
console.log("distance in the block: " + dis);
 
  //console.log("capacity: " + Blockly.Workspace.prototype.remainingCapacity())
    //var block = Blockly.Workspace.prototype.getBlockById('linkbot_drive');
    /*console.log("block id: " + rootBlock);
    console.log("distance in the block: " + dis);
    updateStyleSheet('line');
    //this.innerHTML = 'Pause';
    boxOne.classList.add('horizTranslate');
    $("#success").css({'visibility':'visible'});*/
  }
  else if(document.getElementsByClassName('toggleButton')[0].value ==='reset'
) {
    document.getElementsByClassName('toggleButton')[0].value = 'play';
    document.getElementsByClassName('toggleButton')[0].innerHTML = 'Run';

    $('#home').css({'width': 200 + 'px'});
    $('#home').css({'height': 200 + 'px'});
    if(imgChk == "linkbot"){
      $('#home').css({'background': 'url(./img/linkbot_spritesheet.png)' + 0 +'px' + ' ' + 0 +'px'});
    }
    else{
      $('#home').css({'background': 'url(./img/mindstorms_spritesheet.png)' + 0 +'px' + ' ' + 0 +'px'});
    }
    $('#home').css({'border': 'none'});

    document.getElementById('coordinates').innerHTML = "(0,0)"; 
    robotX = 0;
    robotY = 0;

    $('#roboyes').css({'margin-left': 0 +'px'});
    $('#roboyes').css({'margin-top': 0 + 'px'});
    //$('#home').css({'position' : 'absolute'});
    $('#horizTranslate').css({'margin-left': 0 +'px'});
    $('#horizTranslate').css({'margin-top': 0 + 'px'});
    $('#home').css({'margin-left': 80 +'px'});
    $('#home').css({'margin-top': 255 + 'px'});

    $('#horizTranslate').css({'-webkit-transition': 0.5+'s linear'});
    $('#horizTranslate').css({'-moz-transition': 0.5+'s linear'});
    $('#horizTranslate').css({'-ms-transition': 0.5+'s linear'});
    $('#horizTranslate').css({'-o-transition': 0.5+'s linear'});
    $('#horizTranslate').css({'transition': 0.5+'s linear'});

    document.getElementById('displayAngle').innerHTML = "0Â°";
    displayAngle = 0;


  };
}
function move(i,robotime,driveBlock,angleBlock,x,y,a,b,angle,dis, dis2, blocks, childBlocks, newangle){
        console.log('i ' + i);
        console.log('angle ' + angle);
        block = childBlocks[0];
        console.log('i ' + i);
        console.log('child ' + childBlocks.length);
        if (block.type == 'linkbot_drive_distance_in' || block.type == 'linkbot_drive_distance_cm' || block.type == 'mindstorms_drive_distance_in' || block.type == 'mindstorms_drive_distance_cm') {
          driveBlock = block;
          if(document.getElementById('US Customary').checked)
          {
            dis2 = (round(driveBlock.getFieldValue('distance'))*15);
            dis = (round(driveBlock.getFieldValue('distance'))*15);
            robotime = (round(driveBlock.getFieldValue('distance')))/speeed;
            x = dis * Math.cos(angle);
            y = dis * Math.sin(angle);
            robotX += round(x/15);
            robotY += round(y/15);
          }
          else
          {
            dis2 = (round(driveBlock.getFieldValue('distance'))*18);
            dis = (round(driveBlock.getFieldValue('distance'))*18);
            robotime = (round(driveBlock.getFieldValue('distance')))/speeed;
            x = dis * Math.cos(angle);
            y = dis * Math.sin(angle);
            robotX += round(x/18);
            robotY += round(y/18);
          }

          //dis 2 x y  coords for line
          a = dis2 * Math.cos(angle)  + round(60)* Math.cos(angle);
          b = dis2 * Math.sin(angle)  + round(60)* Math.sin(angle);
        

          drive(x,y,robotime);
          document.getElementById('coordinates').innerHTML = getCoordinates();
        }//if drive
        if (block.type == 'linkbot_turn_in' || block.type == 'linkbot_turn_cm' || block.type == 'mindstorms_turn_in' || block.type == 'mindstorms_turn_cm') {
          angleBlock = block;
          blockDirection = angleBlock.getFieldValue('direction');
          angle += (round(angleBlock.getFieldValue('turn direction'))*Math.PI/180);
          angleImage = (round(angleBlock.getFieldValue('turn direction')));
          //newangle += (round(angleBlock.getFieldValue('turn direction')));

          if(blockDirection == 'turnLeft')
          {
              newangle += (round(angleBlock.getFieldValue('turn direction')));
              if(newangle >= 360)
                newangle -= 360;  
          }
          else
          {
              newangle -= (round(angleBlock.getFieldValue('turn direction')));
              if(newangle < 0)    
                newangle += 360;
              
          }
          displayAngle = newangle; 

          console.log("TIG OL BITIES " + newangle)
          var leftMargin = parseInt($("#roboyes").css('margin-left'));
          var topMargin = parseInt($("#roboyes").css('margin-top'));
          var intervalTime = 500/(angleImage/5);
          var numImages = Math.floor(angleImage/5);
          console.log('NEWANGLE NEW ANGLE ' + newangle);
          setTimeout(function(){linkbotTurn(leftMargin, topMargin, newangle, numImages, intervalTime, blockDirection)}, intervalTime);
          
          document.getElementById('displayAngle').innerHTML = getAngle();
            //y = y - 200;
            
            
        }//if turn

        if(block.type == 'linkbot_speed_in' || block.type == 'linkbot_speed_cm' || block.type == 'mindstorms_speed_in' || block.type == 'mindstorms_speed_cm')
        {
          speedBlock = block;
          speeed = speedBlock.getFieldValue('speed');
        }
        

          childBlocks = block.getChildren();
      if(childBlocks.length > 0){
        i = i + 1;
        console.log('@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@')
      setTimeout(function(){move(i, robotime,driveBlock,angleBlock,x,y,a,b,angle,dis, dis2, blocks, childBlocks, newangle)}, 1000);
    }//if only one block
}

function linkbotTurn(leftMargin, topMargin, newangle, numImages, intervalTime, blockDirection)
{
  var blockDirec = blockDirection;
  console.log("MARGINS " + leftMargin + ' ' + topMargin);
  console.log('NUM IMAGESSSSSS '+ numImages)
  console.log("BLOCK DIRECTIOB LAT " + blockDirection)
  if(numImages <= 0)
    return;
  //LEFT TURN
  if(blockDirec === 'turnLeft')
  {
    if(leftMargin == -2200){
      if(topMargin == -1000){
        leftMargin = 0;
        topMargin = 0;
      }
      else{
      leftMargin = 0;
      topMargin -= 200;
      }
    }
    else
      leftMargin -= 200;
  }
  //RIGHT TURN
  else if(blockDirec === 'turnRight')
  {
    if(leftMargin == 0){
      if(topMargin == 0){
        leftMargin = -2200;
        topMargin = -1000;
      }
      else{
      leftMargin = -2200;
      topMargin += 200;
      }
    }
    else
      leftMargin += 200;
  }

  else
  {
    return;
  }
  if(imgChk == "linkbot"){
    $("#home").css({'background': 'url(./img/linkbot_spritesheet.png) ' + leftMargin+'px' + ' ' + topMargin+'px'});
  }
  else{
    $("#home").css({'background': 'url(./img/mindstorms_spritesheet.png) ' + leftMargin+'px' + ' ' + topMargin+'px'});
  }
  
  $("#roboyes").css({'margin-left': + leftMargin+'px'});
  $("#roboyes").css({'margin-top': + topMargin+'px'});
  numImages--;
  setTimeout(function(){linkbotTurn(leftMargin, topMargin, newangle, numImages, intervalTime, blockDirection)}, intervalTime);

}
//Drive funtion
function drive(x, y, robotime){
  console.log('DRIIIVEEEEE');
  console.log('' + x + ' ' + x);
  console.log('' + y + ' ' + y);
  console.log('top' + ' ' + parseInt($('#horizTranslate').css('margin-top')));
  console.log('left' + ' ' + parseInt($('#horizTranslate').css('margin-left')));
  var oldx = x;
  var oldy = y;
  x = x + parseInt($('#horizTranslate').css('margin-left'));
  //y = y + parseInt($('#horizTranslate').css('margin-top'));
  console.log('oldx ' + oldx);
  console.log('x ' + x);
  console.log('y ' + y);
  $('#horizTranslate').css({'-webkit-transition': robotime+'s linear'});
    $('#horizTranslate').css({'-moz-transition': robotime+'s linear'});
    $('#horizTranslate').css({'-ms-transition': robotime+'s linear'});
    $('#horizTranslate').css({'-o-transition': robotime+'s linear'});
    $('#horizTranslate').css({'transition': robotime+'s linear'});
    if(oldy == 0 && oldx == 0){
        //nonething
      }
    else if(Math.abs(oldy) < 1){
      console.log('topssss ' + $('#horizTranslate').css('margin-top'));
      console.log(' 1oldx' + oldx);
      console.log(' 1oldy' + oldy);
      $('#horizTranslate').css({'margin-left': x + "px"});
    }
    else if(Math.abs(oldx) < 1){
      console.log('leftssss ' + $('#horizTranslate').css('margin-left'));
      if (y>0 && y == Math.floor(parseInt($('#horizTranslate').css('margin-top')))) {y=oldy - oldy};
      if(Math.abs(y)==Math.abs(Math.floor(parseInt($('#horizTranslate').css('margin-top'))))){
        y=y*2;
      }
      $('#horizTranslate').css({'margin-top': -y + "px"});
      console.log(' 2oldy' + oldy);
      console.log(' 2oldx' + oldx);
    }
    else{
      console.log('leftssss ' + Math.floor(parseInt($('#horizTranslate').css('margin-left'))));
      console.log('topssss ' + Math.floor(parseInt($('#horizTranslate').css('margin-top'))));
      //console.log(' x' + x);
      console.log(' oldy ' + Math.floor(oldy));
      console.log('oldx ' + oldx)
      console.log(' ');
      if (y>0 && oldx>0) {
        console.log('comon');
        y=(-oldy);
      }
      else if(y>0){
        y=oldy - oldy
      }
      if(Math.floor(Math.abs(oldy)) == Math.floor(parseInt($('#horizTranslate').css('margin-top')))){
        $('#horizTranslate').css({'margin-top': -(2*y) + "px"});
      }
      else{
        console.log('blah')
        $('#horizTranslate').css({'margin-top': -y + "px"});
      }
      $('#horizTranslate').css({'margin-left': x + "px"});
    }
    
      console.log('wtf');
}//drive func

$('.toggleButton:eq(1)').on('click', function() { 
  if($(this).html() === 'Play') 
  {
    $(this).html('Pause');
    $boxTwo.addClass('horizTranslate');
  } else {
    $(this).html('Play');
    var computedStyle = $boxTwo.css('margin-left');
    $boxTwo.removeClass('horizTranslate');
    $boxTwo.css('margin-left', computedStyle);
  }  
});
  </script>

  <script type="text/javascript">
  document.getElementsByClassName('start_Over')[0].onclick = function(){
    //updateStyleSheet('nothing');
    //elem = sv.getElementById("tits");
    //$("#success").css({'visibility':'hidden'});
    $('#horizTranslate').css({'margin-top': 0 + "px"});
    $('#horizTranslate').css({'margin-left': 0 + "px"});
  }
  </script>

  <script>
    toolbox();
  </script>

  <script>
  //function to change style sheet
    function updateStyleSheet(filename) {
 
    // Create the CSS file name:
 
    newstylesheet = "style_" + filename + ".css";
 
    // Does the <link> tag (with id:dynamic_css) exist?
    // If not, we need to create it.
 
    if ($("#dynamic_css").length == 0) {
 
        // The next line will add the
        // <link> tag between the
        // <head> tags.
 
        $("head").append("<link>")
 
        // The next line will select the
        // <link> element you just added.
 
        css = $("head").children(":last");
 
        // The next line will set the
        // attributes of the elements
        // to make it load the CSS file.
 
        css.attr({
          id: "dynamic_css",
          rel:  "stylesheet",
          type: "text/css",
          href: newstylesheet
        });

        //$("#tits").css({'visibility':'visible'});
 
    // If the <link> element already exists, we
    // simply need to change the value of "href". 
 
    } else {
        $("#dynamic_css").attr("href",newstylesheet);
    }
 
}
  </script>


</div>

  <script>
  var elem;
  var sv = document.getElementById("mysvg");
  console.log(sv);
  //var sdoc = sv.getSVGDocument();
  console.log(sv);
  </script>
</body>
  <script>
    //show the popovers initially
    $('#content_blocks').popover('show');
    //display size of the overhead navs
    //var w = ($( window ).width())/2.5;
    //hide taps on click
    /*$("#tits").onClick(function(){
        $('#content_blocks').popover('hide')      
    })*/
   // $( window ).resize(function() {
   //   w = ($( window ).width())/2.5;
   //   $("#numNav").css({'margin-left':w});
   // $("#copyright").css({'margin-left':w});
 // });
</script>

<script>
  document.getElementById('tits').onclick = function(){
        $('#content_blocks').popover('hide')      
    };
</script>
</html>
